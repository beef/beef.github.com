var PanelView=Backbone.View.extend({initialize:function(e){Backbone.on("loadPanel",this.loadPanel,this)},loadPanel:function(e,t){var n=e?e:"home",r=t===null?n:e+"/"+t;Backbone.pubSub.trigger("hideOverlay"),e!==this.activePanel()&&(this.activatePanel(n,r),this.loadPanelContent(n,r))},updatePanelContent:function(e,t){var n=this;this.activePanelContent().parent("section").removeClass("loaded"),this.activePanelContent().parent("section").attr("data-url",t),this.activePanelContent().contents(".wrapper").fadeOut(500,function(){n.activePanelContent().contents().parent().empty(),n.showPanel(e,t),n.loadPanelContent(e,t)})},activatePanel:function(e,t){this.hideActivePanel(),this.showPanel(e,t)},showPanel:function(e,t){this.$el.scrollTop(0);var n=e,r=t.replace("/","_"),i=r+"_index";this.$el.removeClass(),this.$el.addClass(n+" "+r+" "+i),this.$el.find("section#panel-"+e).removeClass("button"),this.$el.attr("id",e),this.$el.attr("panel-url","/"+t)},activePanelContent:function(){return this.$el.find("section#panel-"+this.activePanel()+" .content")},hideActivePanel:function(){this.$el.find("section#panel-"+this.activePanel()).addClass("button"),this.$el.removeClass(),this.activePanelContent().animate({opacity:0},500)},loadPanelContent:function(e,t){Backbone.pubSub.trigger("onDomChangeTitle");if(this.panelContentLoaded()){this.activePanelContent().delay(300).animate({opacity:1},500);return}var n=this;$.get("/dynamic/"+t,function(t){n.setPanelContent(e,t),n.activePanelContent().parent("section").addClass("loaded"),n.$el.trigger({type:"panelLoaded",panel:e}),n.activePanelContent().delay(300).animate({opacity:1},500)}).fail(function(e,t,n){window.console&&console.log(n)})},panelContentLoaded:function(){return this.activePanelContent().parent("section").hasClass("loaded")},setPanelContent:function(e,t){var n=$(t);this.activePanelContent().append(n)},activePanel:function(){return this.$el.attr("id")},panelUrl:function(e){return e=="home"?"":e},panelName:function(e){return e.attr("id").replace("panel-","")}});