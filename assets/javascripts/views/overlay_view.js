var OverlayView=Backbone.View.extend({initialize:function(e){Backbone.on("loadOverlay",this.loadOverlay,this),Backbone.pubSub.on("hideOverlay",this.hideOverlay,this)},loadOverlay:function(e,t){this.loadOverlayContent(e,t)},loadOverlayContent:function(e,t){Backbone.pubSub.trigger("onDomChangeTitle",t);var n=this,r=$(this.$el.find(".overlay")[0]),i="work_"+t;$("body").removeClass($(r).attr("data-page")),this.overlayContentLoaded()&&r.after('<div class="mask" style="background-image: url(/assets/images/case-study-loading.gif?p'+(new Date).getTime()+');"></div>'),$.get("/dynamic"+e,function(e){var t=$(e);r.html(e),n.overlayContentLoaded()?$(".mask").fadeOut(500,function(){$(this).css({backgroundImage:"none"}).remove()}):r.fadeIn(500),r.attr("data-page",i),n.$el.addClass(i+" case-study-show overlay-active")}).done(function(){n.$el.trigger({type:"overlayLoaded",overlay:r})}).fail(function(){})},overlayContentLoaded:function(){return $("body").hasClass("overlay-active")},hideOverlay:function(){var e=$(this.$el.find(".overlay")[0]),t=this;e.fadeOut(500,function(){e.css("display","none"),t.$el.removeClass("case-study-show overlay-active"),$("body").removeClass($(e).attr("data-page")),$(".mask").css({backgroundImage:"none"}).remove(),Backbone.pubSub.trigger("onDomChangeTitle","Work")})}});